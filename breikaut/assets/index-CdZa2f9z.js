var y=Object.defineProperty;var u=(h,t,e)=>t in h?y(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var i=(h,t,e)=>(u(h,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();class S{constructor(t,e){i(this,"width",200);i(this,"height",30);i(this,"left",0);i(this,"top",200);i(this,"borderRadius",10);i(this,"color","white");i(this,"intervalId");this.left=t,this.top=e}validateAndFixPosition(){this.left<0&&(this.left=0,clearInterval(this.intervalId),this.intervalId=void 0),this.left+this.width>1700&&(this.left=1700-this.width,clearInterval(this.intervalId),this.intervalId=void 0)}startMove(t){this.intervalId===void 0&&(this.intervalId=setInterval(()=>{this.left+=t*5,this.validateAndFixPosition()},5))}stopMove(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0,this.validateAndFixPosition())}}class v{constructor(t,e,s){i(this,"width",30);i(this,"height",30);i(this,"left",0);i(this,"top",0);i(this,"color","white");i(this,"borderRadius",15);i(this,"direction",180);i(this,"speed",10);this.left=e,this.top=s,this.speed=t}resetBall(){this.left=835,this.top=700,this.speed=0,this.direction=180}}class l{constructor(t,e,s,r=!0){i(this,"width",150);i(this,"height",40);i(this,"left",0);i(this,"top",0);i(this,"color","white");i(this,"prevColor","");i(this,"borderRadius",5);i(this,"alive",!0);this.left=t,this.top=e,this.color=s,this.alive=r}killBrick(){this.alive=!1,this.prevColor=this.color,this.color=""}resetBrick(){this.alive||(this.alive=!0,this.color=this.prevColor)}}class m{constructor(){i(this,"score",0);i(this,"scores",[]);i(this,"lastScore",0);i(this,"level",1);i(this,"bricksLeft",27);i(this,"ballSpeed",3+this.level);i(this,"ballInterval");i(this,"width",1700);i(this,"height",1e3);i(this,"paddle",new S(750,915));i(this,"ball",new v(3+this.level,835,700));i(this,"row1Color","#F0A6F7");i(this,"row2Color","#A3F0E0");i(this,"row3Color","#6CDAFC");i(this,"rowTop",80);i(this,"rowSpacing",60);i(this,"colWidth",170);i(this,"colStart",(1550-8*this.colWidth)/2);i(this,"brick11",new l(this.colStart,this.rowTop,this.row1Color));i(this,"brick12",new l(this.colStart+this.colWidth,this.rowTop,this.row1Color));i(this,"brick13",new l(this.colStart+this.colWidth*2,this.rowTop,this.row1Color));i(this,"brick14",new l(this.colStart+this.colWidth*3,this.rowTop,this.row1Color));i(this,"brick15",new l(this.colStart+this.colWidth*4,this.rowTop,this.row1Color));i(this,"brick16",new l(this.colStart+this.colWidth*5,this.rowTop,this.row1Color));i(this,"brick17",new l(this.colStart+this.colWidth*6,this.rowTop,this.row1Color));i(this,"brick18",new l(this.colStart+this.colWidth*7,this.rowTop,this.row1Color));i(this,"brick19",new l(this.colStart+this.colWidth*8,this.rowTop,this.row1Color));i(this,"brick21",new l(this.colStart,this.rowTop+this.rowSpacing,this.row2Color));i(this,"brick22",new l(this.colStart+this.colWidth,this.rowTop+this.rowSpacing,this.row2Color));i(this,"brick23",new l(this.colStart+this.colWidth*2,this.rowTop+this.rowSpacing,this.row2Color));i(this,"brick24",new l(this.colStart+this.colWidth*3,this.rowTop+this.rowSpacing,this.row2Color));i(this,"brick25",new l(this.colStart+this.colWidth*4,this.rowTop+this.rowSpacing,this.row2Color));i(this,"brick26",new l(this.colStart+this.colWidth*5,this.rowTop+this.rowSpacing,this.row2Color));i(this,"brick27",new l(this.colStart+this.colWidth*6,this.rowTop+this.rowSpacing,this.row2Color));i(this,"brick28",new l(this.colStart+this.colWidth*7,this.rowTop+this.rowSpacing,this.row2Color));i(this,"brick29",new l(this.colStart+this.colWidth*8,this.rowTop+this.rowSpacing,this.row2Color));i(this,"brick31",new l(this.colStart,this.rowTop+this.rowSpacing*2,this.row3Color));i(this,"brick32",new l(this.colStart+this.colWidth,this.rowTop+this.rowSpacing*2,this.row3Color));i(this,"brick33",new l(this.colStart+this.colWidth*2,this.rowTop+this.rowSpacing*2,this.row3Color));i(this,"brick34",new l(this.colStart+this.colWidth*3,this.rowTop+this.rowSpacing*2,this.row3Color));i(this,"brick35",new l(this.colStart+this.colWidth*4,this.rowTop+this.rowSpacing*2,this.row3Color));i(this,"brick36",new l(this.colStart+this.colWidth*5,this.rowTop+this.rowSpacing*2,this.row3Color));i(this,"brick37",new l(this.colStart+this.colWidth*6,this.rowTop+this.rowSpacing*2,this.row3Color));i(this,"brick38",new l(this.colStart+this.colWidth*7,this.rowTop+this.rowSpacing*2,this.row3Color));i(this,"brick39",new l(this.colStart+this.colWidth*8,this.rowTop+this.rowSpacing*2,this.row3Color));i(this,"brickArray",[this.brick11,this.brick12,this.brick13,this.brick14,this.brick15,this.brick16,this.brick17,this.brick18,this.brick19,this.brick21,this.brick22,this.brick23,this.brick24,this.brick25,this.brick26,this.brick27,this.brick28,this.brick29,this.brick31,this.brick32,this.brick33,this.brick34,this.brick35,this.brick36,this.brick37,this.brick38,this.brick39])}startMovePaddle(t,e){t.startMove(e)}stopMovePaddle(t){t.stopMove()}moveBall(){this.ballInterval=setInterval(()=>{this.ballCollisions(this.ball,this.paddle,this.brickArray),this.ball.left+=this.ballSpeed*Math.sin(this.ball.direction*Math.PI/180),this.ball.top+=-this.ballSpeed*Math.cos(this.ball.direction*Math.PI/180)},5)}stopBall(t=!1){this.ballInterval&&(clearInterval(this.ballInterval),this.ballInterval=void 0,t||this.ball.resetBall())}ballCollisions(t,e,s){this.ballWallCollision(t),t.top<250&&this.ballBrickCollision(t,s),t.top>850&&this.ballPaddleCollision(t,e)}ballWallCollision(t){t.left<=0?t.direction-=180-(270-t.direction)*2:t.top<=0?t.direction-=(180-(360-t.direction)*2)%360:t.left>=1670&&(t.direction+=180+(90-t.direction)*2)}ballPaddleCollision(t,e){if(t.top>=885&&t.top<=915&&t.left+30>e.left&&t.left<e.left+200){let s=(t.left+30-e.left)/230;s<.5?(s<.15&&(s=.15),t.direction=270+90*s*2):(s>.85&&(s=.85),t.direction=90*(s-.5)*2)}}ballBrickCollision(t,e){e.forEach(s=>{s.alive&&(t.direction<180&&t.direction>0&&t.top+30>s.top&&t.top<s.top+40&&t.left+30>s.left&&t.left+29<s.left?(t.direction+=180+(90-t.direction)*2,s.killBrick(),this.score+=10*this.level,this.bricksLeft--):t.direction<270&&t.direction>90&&t.top+30>s.top&&t.top<s.top+29&&t.left+30>s.left&&t.left<s.left+150?(t.direction-=(180-(360-t.direction)*2)%360,s.killBrick(),this.score+=10*this.level,this.bricksLeft--):t.direction<360&&t.direction>180&&t.top+30>s.top&&t.top<s.top+40&&t.left-150<s.left&&t.left>s.left+149?(t.direction-=180-(270-t.direction)*2,s.killBrick(),this.score+=10*this.level,this.bricksLeft--):(t.direction<90||t.direction>270)&&t.top-31>s.top&&t.top<s.top+40&&t.left+30>s.left&&t.left<s.left+150&&(t.direction-=(180-(360-t.direction)*2)%360,s.killBrick(),this.score+=10*this.level,this.bricksLeft--))})}ballOut(){return this.ball.top>1e3}gameState(){if(this.bricksLeft==0)return"lvlUp";if(this.ballOut())return"endGame"}resetBricks(){this.bricksLeft=27;for(const t of this.brickArray)t.resetBrick()}endGame(){console.log("Game over!"),this.level=1,this.ballSpeed=3+this.level,this.paddle.left=750,this.lastScore=this.score,this.scores.push(this.score),this.scores.sort((t,e)=>e-t),this.score=0,this.stopBall(),this.resetBricks()}nextLevel(){this.level+=1,console.log("Next level: "+this.level),this.stopBall(),this.ballSpeed=3+this.level,this.resetBricks()}}class x{constructor(t,e){i(this,"width",-1);i(this,"height",-1);i(this,"scaleX",1);i(this,"scaleY",1);this.brain=t,this.appContainer=e,this.setScreenDimensions()}setScreenDimensions(t,e){this.width=t||document.documentElement.clientWidth,this.height=e||document.documentElement.clientHeight,this.scaleX=this.width/this.brain.width,this.scaleY=this.height/this.brain.height}calculateScaledX(t){return t*this.scaleX|0}calculateScaledY(t){return t*this.scaleY|0}drawPaddle(t){let e=document.createElement("div");e.style.zIndex="10",e.style.position="fixed",e.style.left=this.calculateScaledX(t.left)+"px",e.style.top=this.calculateScaledY(t.top)+"px",e.style.width=this.calculateScaledX(t.width)+"px",e.style.height=this.calculateScaledY(t.height)+"px",e.style.backgroundColor=t.color,e.style.borderRadius=t.borderRadius+"px",this.appContainer.append(e)}drawBall(t){let e=document.createElement("div");e.style.zIndex="10",e.style.position="fixed",e.style.left=this.calculateScaledX(t.left)+"px",e.style.top=this.calculateScaledY(t.top)+"px",e.style.width=this.calculateScaledX(t.width)+"px",e.style.height=this.calculateScaledY(t.height)+"px",e.style.backgroundColor=t.color,e.style.borderRadius=t.borderRadius+"px",this.appContainer.append(e)}drawBrick(t){let e=document.createElement("div");e.style.zIndex="10",e.style.position="fixed",e.style.left=this.calculateScaledX(t.left)+"px",e.style.top=this.calculateScaledY(t.top)+"px",e.style.width=this.calculateScaledX(t.width)+"px",e.style.height=this.calculateScaledY(t.height)+"px",e.style.backgroundColor=t.color,e.style.borderRadius=t.borderRadius+"px",this.appContainer.append(e)}drawAllBricks(){this.brain.brickArray.forEach(t=>{this.drawBrick(t)})}drawScoreboard(){let t=document.createElement("div");t.style.zIndex="9",t.style.position="fixed",t.style.textAlign="center",t.style.color="white",t.style.fontSize=this.calculateScaledY(45)+"px",t.style.fontFamily="Silkscreen",t.style.whiteSpace="pre",t.style.top=this.calculateScaledY(10)+"px",t.style.width="100%",t.style.height=this.calculateScaledY(50)+"px";let e="speed: "+this.brain.level+"  |  score: "+this.brain.score;t.textContent=e,this.appContainer.append(t)}drawPause(){let t=document.createElement("div");t.style.zIndex="11",t.style.position="fixed",t.style.textAlign="center",t.style.color="white",t.style.fontSize=this.calculateScaledY(300)+"px",t.style.fontFamily="Silkscreen",t.style.top="30%",t.style.width="100%",t.style.height="100%";let e="||";t.textContent=e,this.appContainer.append(t)}drawOver(){let t=document.createElement("div");t.style.zIndex="11",t.style.position="fixed",t.style.textAlign="center",t.style.color="white",t.style.fontSize=this.calculateScaledY(150)+"px",t.style.fontFamily="Silkscreen",t.style.top="11%",t.style.width="100%",t.style.height="100%";let e="GAME OVER!";t.textContent=e,this.appContainer.append(t)}drawLogo(){let t=document.createElement("div");t.style.zIndex="11",t.style.position="fixed",t.style.textAlign="center",t.style.color="white",t.style.fontSize=this.calculateScaledY(200)+"px",t.style.fontFamily="Kaushan Script",t.style.top="8%",t.style.width="100%",t.style.height="100%";let e="Breikaut!";t.textContent=e,this.appContainer.append(t)}drawPlay(){let t=document.createElement("div");t.id="start",t.style.zIndex="11",t.style.position="fixed",t.style.textAlign="center",t.style.color="white",t.style.fontSize=this.calculateScaledY(50)+"px",t.style.fontFamily="Silkscreen",t.style.left=this.calculateScaledX(500)+"px",t.style.top="50%",t.style.width=this.calculateScaledX(700)+"px",t.style.height=this.calculateScaledY(80)+"px";let e="Start game";t.textContent=e,t.style.cursor="pointer",t.addEventListener("mouseover",()=>{t.style.color="#F0A6F7"}),t.addEventListener("mouseout",()=>{t.style.color="white"}),this.appContainer.append(t)}drawHiscores(){let t=document.createElement("div");t.id="hiscores",t.style.zIndex="11",t.style.position="fixed",t.style.textAlign="center",t.style.color="white",t.style.fontSize=this.calculateScaledY(50)+"px",t.style.fontFamily="Silkscreen",t.style.left=this.calculateScaledX(500)+"px",t.style.top="60%",t.style.width=this.calculateScaledX(700)+"px",t.style.height=this.calculateScaledY(80)+"px";let e="Hiscores";t.textContent=e,t.style.cursor="pointer",t.addEventListener("mouseover",()=>{t.style.color="#F0A6F7"}),t.addEventListener("mouseout",()=>{t.style.color="white"}),this.appContainer.append(t)}drawKeys(){let t=document.createElement("div");t.style.zIndex="11",t.style.position="fixed",t.style.textAlign="center",t.style.color="white",t.style.fontSize=this.calculateScaledY(30)+"px",t.style.fontFamily="Silkscreen",t.style.whiteSpace="pre",t.style.top="90%",t.style.width="100%",t.style.height="100%";let e="start: down arrow   |   move: left/right arrow   |   pause: space";t.textContent=e,this.appContainer.append(t)}drawScore(){let t=document.createElement("div");t.style.zIndex="11",t.style.position="fixed",t.style.textAlign="center",t.style.color="white",t.style.fontSize=this.calculateScaledY(50)+"px",t.style.fontFamily="Silkscreen",t.style.top="50%",t.style.width="100%",t.style.height="100%";let e="Score: "+this.brain.lastScore;t.textContent=e,this.appContainer.append(t)}drawScores(){let t=document.createElement("div");t.id="hiscores",t.style.zIndex="11",t.style.position="fixed",t.style.textAlign="center",t.style.color="white",t.style.fontSize=this.calculateScaledY(50)+"px",t.style.fontFamily="Silkscreen",t.style.left=this.calculateScaledX(650)+"px",t.style.top="15%",t.style.width=this.calculateScaledX(400)+"px",t.style.height=this.calculateScaledY(500)+"px",t.style.whiteSpace="pre";let e=`HISCORES\r
\r
`;if(this.brain.scores.length!=0)for(let s=0;s<(this.brain.scores.length||4);s++)e+=this.brain.scores[s]+`\r
`;t.textContent=e,this.appContainer.append(t)}drawBottomText(){let t=document.createElement("div");t.style.zIndex="11",t.style.position="fixed",t.style.textAlign="center",t.style.color="white",t.style.fontSize=this.calculateScaledY(50)+"px",t.style.fontFamily="Silkscreen",t.style.top="80%",t.style.width="100%",t.style.height="100%";let e="Press ENTER to continue!";t.textContent=e,this.appContainer.append(t)}draw(t){switch(this.appContainer.innerHTML="",this.setScreenDimensions(),t){case"game":this.drawPaddle(this.brain.paddle),this.drawBall(this.brain.ball),this.drawAllBricks(),this.drawScoreboard();break;case"pause":this.drawPaddle(this.brain.paddle),this.drawBall(this.brain.ball),this.drawAllBricks(),this.drawScoreboard(),this.drawPause();break;case"over":this.drawOver(),this.drawScore(),this.drawBottomText();break;case"main":this.drawLogo(),this.drawPlay(),this.drawHiscores(),this.drawKeys();break;case"hiscores":this.drawScores(),this.drawBottomText();break}}}function g(){if(document.querySelectorAll("#app").length!=1)throw Error("More or less than one div with id 'app' found!");if(document.querySelectorAll("div").length!=1)throw Error("More or less than one div found in index.html!")}function k(){g();let h=document.querySelector("#app"),t=new m,e=new x(t,h),s=!1,r=!1,o="main";document.addEventListener("keydown",c=>{switch(c.key){case"ArrowLeft":!s&&o=="game"&&t.startMovePaddle(t.paddle,-1);break;case"ArrowRight":!s&&o=="game"&&t.startMovePaddle(t.paddle,1);break;case"ArrowDown":!r&&o=="game"&&(r=!0,t.moveBall());break;case" ":s&&r&&o=="pause"?(console.log("Okay, les go!"),o="game",s=!1,t.moveBall()):!s&&r&&o=="game"&&(console.log("Paused!"),o="pause",s=!0,t.stopBall(!0));break;case"Enter":o=="over"||o=="hiscores"?o="main":o=="main"&&(console.log("Start game"),o="game");break}}),document.addEventListener("keyup",c=>{switch(c.key){case"ArrowLeft":t.stopMovePaddle(t.paddle);break;case"ArrowRight":t.stopMovePaddle(t.paddle);break}}),document.addEventListener("click",c=>{const d=c.target;d.id==="start"&&a(),d.id==="hiscores"&&f()});function a(){console.log("Start game"),o="game"}function f(){console.log("Hiscores"),o="hiscores"}function p(c){setTimeout(()=>{switch(c.gameState()){case"lvlUp":r=!1,c.nextLevel();break;case"endGame":r=!1,o="over",c.endGame();break}p(c)},5)}let n=!1;function w(c){setTimeout(()=>{!n&&o=="main"?(n=!0,c.draw(o)):o!="main"&&(n=!1,c.draw(o)),w(c)},10)}w(e),p(t)}console.log("Breikaut startup...");k();
